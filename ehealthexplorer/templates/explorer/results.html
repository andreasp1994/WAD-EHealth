{% extends 'explorer/base.html' %}

{% load staticfiles %}

{% block title %}Results{% endblock %}

{% block body_block %}

    <div id="results-container">
    <ul class="nav nav-tabs">
        <li class="active"><a data-toggle="tab" href="#results">Results</a></li>
        <li><a data-toggle="tab" href="#bing">Bing</a></li>
        <li><a data-toggle="tab" href="#medLine">MedLine</a></li>
        <li><a data-toggle="tab" href="#healthFinder">HealthFinder</a></li>
    </ul>

    <div class="tab-content">
        <div id="results" class="tab-pane fade in active">
            <h3>All results</h3>
            {% if results %}
                <h4>
                    <ol>
                    {% for result in results %}
                        <li><a href="{{ result.url }}">{{ result.title }}</a><h5>{{ result.summary }}</h5>
                            <h6>Readability: {{ result.read }} Polarity: {{ result.pola }} Subjectivity: {{ result.subj }} Source: {{ result.source }}</h6>
                        </li>
                    {% endfor %}
                    </ol>
                </h4>
            {% else %}
                <h5>No results for this search</h5>
            {% endif %}
        </div>
        
        <div id="bing" class="tab-pane fade">
            <h3>Bing</h3>
            {% if bing %}
                <h4>
                    <ol>
                    {% for result in bing %}
                        <li><a href="{{ result.url }}">{{ result.title }}</a><h5>{{ result.summary }}</h5>
                            <h6>Readability: {{ result.read }} Polarity: {{ result.pola }} Subjectivity: {{ result.subj }}</h6>
                        </li>
                    {% endfor %}
                    </ol>
                </h4>
            {% else %}
                <h5>No Bing results for this search</h5>
            {% endif %}
        </div>
        
        <div id="medLine" class="tab-pane fade">
        
            <h3>MedLine</h3>
            {% if medLine %}
                <h4>
                    <ol>
                    {% for result in medLine %}
                        <li><a href="{{ result.url }}">{{ result.title }}</a><h5>{{ result.summary }}</h5>
                            <h6>Readability: {{ result.read }} Polarity: {{ result.pola }} Subjectivity: {{ result.subj }}</h6>
                        </li>
                    {% endfor %}
                    </ol>
                </h4>
            {% else %}
                <h5>No MedLine results for this search</h5>
            {% endif %}
        </div>
        
        <div id="healthFinder" class="tab-pane fade">
        
            <h3>HealthFinder</h3>
            {% if healthFinder %}
                <h4>
                    <ol>
                    {% for result in healthFinder %}
                        <li><a href="{{ result.url }}">{{ result.title }}</a><h5>{{ result.summary }}</h5>
                            <h6>Readability: {{ result.read }} Polarity: {{ result.pola }} Subjectivity: {{ result.subj }}</h6>
                        </li>
                    {% endfor %}
                    </ol>
                </h4>
            {% else %}
                <h5>No HealthFinder results for this search</h5>
            {% endif %}
        </div>
    </div>
    </div>
{% endblock %}

<!-- Need to display items in four tabs:
        - All engines
        - MedLine only
        - HealthFinder only
        - Bing search only
    These should come from the context dict seperately?
    For the moment they are. 
 -->

{% block side_block %}

    <div class="row" >
    		<!--<h2 class="search-text">Search</h2>-->
            <div id="custom-search-input">
                <div class="input-group col-md-12">
                    <span class="input-group-btn">
                         <form class="form-inline" id="search_form" method="post" action="{% url 'results' %}">
                             {% csrf_token %}
                             <div class="col-md-2 no-gutter">
                                <button class="btn btn-info btn-lg" type="submit">
                                    <i class="glyphicon glyphicon-search"></i>
                                </button>
                             </div>
                             <div class="col-md-8 col-md-offset-2 no-gutter">
                                <input id="search_box" name="query" type="text" class="form-control input-lg" placeholder="Search..." />
                             </div>
                         </form>
                    </span>
                </div>
            </div>
        </div>

    <h3>Ratings summary</h3>
    <div class="col-md-12">
        <div class="col-md-4">
        <div class="predefined-terms-info">
             <span id="test" class="glyphicon glyphicon-question-sign"><span class="popup">
                90+   : Very Easy</br>
                80-89 : Easy</br>
                70-79 : Fairly Easy</br>
                60-69 : Standard</br>
                50-59 : Fairly Difficult</br>
                30-49 : Difficult</br>
                0-29  : Very Difficult</br>
             </span> </span>
        </div>
        </div>
        <div class="col-md-4">
        <div class="predefined-terms-info">
             <span id="test" class="glyphicon glyphicon-question-sign"> <span class="popup">
                 1 : Very positive</br>
                 0.5 : Fairly positive</br>
                 0 : Neutral</br>
                -0.5 : Fairly negative</br>
                -1 : Very negative</br>
             </span> </span>
        </div>
        </div>
        <div class="col-md-4">
        <div class="predefined-terms-info">
            <span id="test" class="glyphicon glyphicon-question-sign"> <span class="popup">
                1 : Subjective</br>
                0.5 : Neutral</br>
                0 : Objective</br>
            </span></span>
        </div>
        </div>
    </div>

    


 
{% endblock %}